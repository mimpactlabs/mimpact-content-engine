<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mimpact Content Engine</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #111;
  color: #fff;
  padding: 20px;
}

input, textarea, select, button {
  width: 100%;
  margin: 5px 0 15px 0;
  padding: 8px;
  border-radius: 5px;
  border: none;
}

button {
  background: #00c3ff;
  color: black;
  font-weight: bold;
  cursor: pointer;
}

button:hover {
  opacity: 0.8;
}

#output {
  white-space: pre-wrap;
  background: #222;
  padding: 15px;
  border-radius: 5px;
}
</style>
</head>

<body>

<h2>üß† Alat Konsistensi Karakter AI</h2>

<h3>üîê Buat Karakter</h3>

<input id="name" placeholder="Nama Karakter">
<input id="age" placeholder="Usia">
<input id="gender" placeholder="Jenis Kelamin">
<input id="face" placeholder="Deskripsi Wajah">
<input id="hair" placeholder="Deskripsi Rambut">
<input id="outfit" placeholder="Pakaian Standar">
<input id="style" placeholder="Gaya Visual">

<button onclick="saveCharacter()">Simpan Karakter</button>

<h3>üß¨ Pilih Karakter</h3>
<select id="characterSelect"></select>
<button onclick="deleteCharacter()">Hapus Karakter</button>

<hr>

<h3>üéõ Mode</h3>
<select id="mode">
  <option value="image">Gambar AI</option>
  <option value="video">Video AI</option>
  <option value="story">Story</option>
  <option value="chat">Dialogue</option>
</select>

<textarea id="scene" placeholder="Tulis adegan di sini..."></textarea>

<label>
  <input type="checkbox" id="outfitLock">
  Aktifkan Variasi Pakaian
</label>

<input id="outfitVariation" placeholder="Contoh: versi hoodie hitam, tambah jaket denim, versi malam">

<button onclick="generate()">Menghasilkan</button>

<h3>üì¶ Output</h3>
<div id="output"></div>

<script>

let selectedCharacter = "";
let characters = JSON.parse(localStorage.getItem("characters")) || [];

function refreshDropdown() {
  const select = document.getElementById("characterSelect");
  select.innerHTML = "";

  characters.forEach((char, index) => {
    let option = document.createElement("option");
    option.value = index;
    option.text = char.name + " (" + char.age + " - " + char.gender + ")";
    select.appendChild(option);
  });

  if (characters.length > 0) {
    loadCharacter(0);
  }
}

function saveCharacter() {
  let char = {
    name: document.getElementById("name").value,
    age: document.getElementById("age").value,
    gender: document.getElementById("gender").value,
    face: document.getElementById("face").value,
    hair: document.getElementById("hair").value,
    outfit: document.getElementById("outfit").value,
    style: document.getElementById("style").value
  };

  characters.push(char);
  localStorage.setItem("characters", JSON.stringify(characters));
  refreshDropdown();
}

function loadCharacter(index) {
  let char = characters[index];

  selectedCharacter =
    char.name + ", " +
    char.gender + " berusia " + char.age + " tahun, " +
    char.face + ", " +
    char.hair + ", " +
    char.outfit + ", " +
    char.style;
}

function deleteCharacter() {
  let select = document.getElementById("characterSelect");
  characters.splice(select.value, 1);
  localStorage.setItem("characters", JSON.stringify(characters));
  refreshDropdown();
}

document.getElementById("characterSelect").addEventListener("change", function() {
  loadCharacter(this.value);
});

function generate() {

  let sceneInput = document.getElementById("scene").value;
  let mode = document.getElementById("mode").value;
  let output = document.getElementById("output");

  if (!sceneInput.trim()) {
    output.innerText = "Masukkan adegan terlebih dahulu.";
    return;
  }

  let outfitLock = document.getElementById("outfitLock").checked;
  let outfitVariation = document.getElementById("outfitVariation").value;

  let consistency =
    "same person, identical face, same bone structure, same age, " +
    "do not modify facial features, preserve identity";

  if (outfitLock && outfitVariation.trim()) {
    consistency += ", keep core outfit identity but " + outfitVariation;
  } else {
    consistency += ", maintain core outfit identity";
  }

  let result = "";

  if (mode === "image") {
    result =
      selectedCharacter + "\n\n" +
      sceneInput + ", ultra detailed, 8k, " +
      consistency;

  } else if (mode === "video") {
    result =
      selectedCharacter + "\n\n" +
      sceneInput + ", cinematic movement, dramatic lighting";

  } else if (mode === "story") {
    result =
      "Write a detailed story about:\n" +
      selectedCharacter + "\nScene: " + sceneInput;

  } else if (mode === "chat") {
    result =
      "You are roleplaying as:\n" +
      selectedCharacter + "\nSituation: " + sceneInput;
  }

  output.innerText = result;
}

refreshDropdown();

</script>

</body>
</html>
